그래픽스 파이프라인 - 래스터화(Rasterization) 중

# 클리핑(Clipping)

### 절두체 컬링(Frustum Culling) 수행
- 카메라 영역을 이용한 절두체(Camere Frustum) 컬링을 수행하여, 카메라 영역에 포함되어 있는 물체들을 클립 공간으로 이동한다.
- 카메라 영역에 포함되어 있지 않은 물체들은 생략함으로써 랜더링을 수행할 물체의 개수를 줄여 작업 효율을 높인다.

<img src="https://github.com/hdh5184/Problem-Solving-Ability-Application/assets/127714162/832072be-fb4d-4078-8454-9c516f7fbf37" width="70%" title="px(픽셀) 크기 설정" alt="RubberDuck"></img>
> 사진 참고 : https://docs.unrealengine.com/4.26/en-US/RenderingAndGraphics/VisibilityCulling/

### 투영 변환(perspective transformation)
- 카메라 영역 내 모든 물체들은 투영 변환을 통해 직육면체로 이룬 3차원 클립 공간으로 이동된다.
- 최종적으로 3차원 공간을 2차원 화면으로 확인 시 적용된 원근법을 구현하기 위해 카메라 절두체 영역을 직육면체 클립 공간으로 변환한다.
- 카메라 위치로부터 먼 물체일수록 상대적으로 크기가 작아짐에 따라 원근법을 구현해낸다.
- 클립 공간 내 물체들은 투영 변환을 거치면서 원근법이 적용된 물체로 변형되며, 이후 클립 공간을 2차원 화면으로 변환하는 데 이용된다.

#### 원근 나눗셈(Perspective division)
- 3차원 클립 공간을 2차원 공간으로 변환할 때 수행된다.
- 투영 변환 후 실제 저장된 z값은 동차좌표계 (x,y,z,w)에서 w성분에 저장되어 있어 투영변환 이후 w좌표 값으로 좌표를 나누는 연산으로 2차원 적 원근법을 구현한다.
- 원근 나눗셈이 적용된 이후 동차 좌표계에서 (x,y,z)의 3차원 좌표계로 변환한다.
- 각 3차원 좌표 범위가 [-1, 1]로 이루기에 NDC(normalized device coordinates)공간으로 정규화한다. (z 범위가 [0,1]인 경우도 존재)

<img src="https://github.com/hdh5184/Problem-Solving-Ability-Application/assets/127714162/4db9a473-3116-439f-b143-63bbe135293c" width="70%" title="px(픽셀) 크기 설정" alt="RubberDuck"></img>

### 클리핑(Clipping)

- 투영 변환이 이루어진 클립 공간 내 물체들 중 클립 공간 영역의 일부만이 포함되어 있는 물체에 적용된다.
- 해당 물체 클립 공간 영역 외부


세 개의 삼각형 중 t1과 t3의 일부가 뷰 프러스텀의 바깥 쪽에 놓여져 있다. 우선 t1의 전체가 외부에 있으므로 t1은 버려진다.
t2는 완전히 내부에 존재하므로 파이프라인의 다음 단계로 넘어가게 된다. t3는 일부는 내부에 존재하고 나머지는 외부에 존재한다.
이 경우 외부에 존재하는 부분을 자르고 내부에 존재하는 부분만 다음 단계로 보내야 한다. 외부의 부분을 자르게 되면 잘린 부분을 기점으로 새로운 정점이 생기게 된다.
따라서 새 정점을 추가하여 다음 단계로 보내게 된다.



